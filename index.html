<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="description"
        content="ADaPT">
  <meta name="keywords" content="TBD">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title></title>

  <link href="https://fonts.googleapis.com/css?family=Google+Sans|Noto+Sans|Castoro"
        rel="stylesheet">

  <link rel="stylesheet" href="./website/css/bulma.min.css">
  <link rel="stylesheet" href="./website/css/bulma-carousel.min.css">
  <link rel="stylesheet" href="./website/css/bulma-slider.min.css">
  <link rel="stylesheet" href="./website/css/fontawesome.all.min.css">
  <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css">
  <link rel="stylesheet" href="./website/css/index.css">
  <link rel="icon" href="./website/images/ai2_website_top.png">

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script defer src="./website/js/fontawesome.all.min.js"></script>
  <script src="./website/js/bulma-carousel.min.js"></script>
  <script src="./website/js/bulma-slider.min.js"></script>
  <script src="./website/js/index.js"></script>
</head>
<body>
<section class="hero">
  <div class="hero-body">
    <div class="container is-max-desktop">
      <div class="columns is-centered">
        <div class="column has-text-centered">
          <h1 class="title is-2 publication-title">ADaPT: As-Needed Decomposition and Planning with Language Models</h1>
          <div class="is-size-5 publication-authors">
            <span class="author-block">
              <a href="https://archiki.github.io/">Archiki Prasad</a><sup>1</sup>,
              <a href="https://www.coli.uni-saarland.de/~koller/">Alexander Koller</a><sup>3</sup>,
              <a href="https://scholar.google.dk/citations?user=f-NzaE8AAAAJ&hl=en">Mareike Hartmann</a><sup>3</sup>,
            </span>
            <span class="author-block">
              <a href="https://allenai.org/team/peterc">Peter Clark</a><sup>2</sup>,
              <a href="https://allenai.org/team/ashishs">Ashish Sabharwal</a><sup>2</sup>,
              <a href="https://www.cs.unc.edu/~mbansal/">Mohit Bansal</a><sup>1</sup>,
              <a href="https://allenai.org/team/tushark">Tushar Khot</a><sup>2</sup>
            </span>
            
          </div>

          <div class="is-size-5 publication-authors">
            <span class="author-block"><sup>1</sup>UNC Chapel Hill</span>,
            <span class="author-block"><sup>2</sup>Allen Institute for AI</span>,
            <span class="author-block"><sup>3</sup>Saarland University</span>,
          </div>
          <div class="column has-text-centered">
            <div class="publication-links">
              <!-- PDF Link. -->
              <span class="link-block">
                <a href="./files/ADaPT_final.pdf"
                   class="external-link button is-normal is-rounded is-dark">
                  <span class="icon">
                      <i class="ai ai-arxiv"></i>
                  </span>
                  <span>Paper</span>
                </a>
              </span>
              <!-- Code Link. -->
              <span class="link-block">
                <a href="https://github.com/archiki/ADaPT"
                   class="external-link button is-normal is-rounded is-dark">
                  <span class="icon">
                      <i class="fab fa-github"></i>
                  </span>
                  <span>Code</span>
                  </a>
              </span>
              <!-- Data Link. -->
              <span class="link-block">
                <a href="https://github.com/archiki/ADaPT/tree/main/TextCraft"
                   class="external-link button is-normal is-rounded is-dark">
                  <span class="icon">
                      <i class="fas fa-globe"></i>
                  </span>
                  <span>Environments</span>
                  </a>
              </span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section><section class="section">
  <div class="container is-max-desktop">
    <!-- Abstract. -->
    <img src="./website/images/intro.svg" alt="Teaser" width="80%">
    <br>
   
    <div class="columns is-centered has-text-centered">
      <div class="column is-four-fifths">
        <h3 class="title is-4">Abstract</h3>
        <div class="content has-text-justified">
          <p>
            Large Language Models (LLMs) are increasingly being used for interactive decision-making tasks requiring planning and adapting to the environment. Recent works employ LLMs-as-agents in broadly two ways: iteratively determining the next action (iterative executors) or generating plans and executing sub-tasks using LLMs (plan-and-execute). However, these methods struggle with task complexity, as the inability to execute any sub-task may lead to task failure. To address these shortcomings, we introduce <strong>As-Needed Decomposition and Planning for complex Tasks</strong> (<strong>ADaPT</strong>), an approach that explicitly plans and decomposes complex sub-tasks as-needed, i.e., when the LLM is unable to execute them. ADaPT recursively decomposes sub-tasks to adapt to both task complexity and LLM capability. Our results demonstrate that ADaPT substantially outperforms established strong baselines, <strong>achieving success rates up to 28.3% higher in ALFWorld, 27% in WebShop, and 33% in TextCraft</strong> -- a novel compositional dataset that we introduce. Through extensive analysis, we illustrate the importance of multilevel decomposition and establish that ADaPT dynamically adjusts to the capabilities of the executor LLM as well as to task complexity. 
          </p>
          <p>            
          </p>
        </div>
      </div>
    </div>

    <div class="container is-max-desktop">
      <!-- Abstract. -->
      <div class="columns is-centered has-text-centered">
        <div class="column is-four-fifths">
          <!-- <h2 class="title is-3">Abstract</h2> -->
          <div class="content has-text-justified">
            <p>
              In the example above, the overall task of putting a clean mug on a desk in an unfamiliar household is too complex for the model, leading to the failure of the iterative executor. While a plan-and-execute-style approach initially breaks down the task into three sub-tasks, it falls short in accounting for the complexity of finding a mug. Therefore, ADaPT employs its recursive structure to <strong>dynamically adapt</strong> to execution failures (assessed by LLMs), by <strong>further decomposing the complex sub-task</strong> of finding a mug via the planner.            </p>

            <h3 class="title is-4">Methodology</h3>

            Broadly, we utilize separate <strong>planner</strong> and  <strong>executor</strong> LLM modules within ADaPT.  The executor performs low-level "atomic" skills specific to the environment by interacting with it iteratively and uses the LLM to self-assess whether the task was successfully completed. On the other hand, the planner breaks down complex tasks into smaller sub-tasks and generates logical operators to combine various sub-tasks to accomplish the task. We incorporate these modules into ADaPT via the <strong>controller</strong> which is a pre-determined and recursive algorithm.
          <br>
            <img src="./website/images/main.svg">
          <br>
            <p>
              The figure above shows the control flow of ADaPT.  A complex task such as <em>put a clean mug on the desk</em> is first assigned to the executor. If the executor does not succeed, then ADaPT calls the planner to decompose the task into sub-tasks along with a logical operator (<em>"And"</em> or <em>"Or"</em> ) indicating how to compose them. Each sub-task (or step) is then assigned recursively to ADaPT and is combined using the logical operator. In the end, the success of sub-tasks after recursive decomposition ensures overall task success.
            </p>

            <h3 class="title is-4">ADaPT yields the highest overall success rates</h3>
            <img src="./website/images/adapt_tab1.png">
            <br>
            <p>
              On three interactive decision-making tasks: ALFWorld (shown above on left), WebShop (shown above on right), and TextCraft (below), ADaPT improves the performance of GPT-3.5 over previous approaches such as ReAct, Plan-and-Execute by up to 28.3%, 27%, and 33% (absolute) points respectively. Compared to Reflexion, an adaptive approach that addresses failures in the full task trajectory, ADaPT yields higher success rates by 14.1% and 9% (absolute) points on ALFWorld and WebShop, respectively.
            </p>
            <img src="./website/images/adapt_tab2.png" alt="TextCraft" width="40%">
            <h3 class="title is-4">ADaPT dynamically accomodates executor capabilities</h3>
            <!-- <img src="./website/images/AI2_dscale.png" alt="scale" width="60%">
            <br>
            <p>
              Across all three datasets, on dev sets we find that performance of ADaPT increases with increasing maximum depth budget (dmax).
            </p> -->
            <img src="./website/images/exec_capabilities.svg" alt="executor capabilities">
            <br>
            <p>Using the ALFWorld dataset, we demonstrate that ADaPT dynamically adjusts to account for executor capabilities. On the left, we illustrate how the same planner module improves the performance of two different executor LLMs. On the right, we show that, even for the same underlying LLM, ADaPT enhances performance across different prompt settings, ranging from specialized task-specific executors that observe relevant gold trajectories to atomic executors capable only of performing atomic skills in the environment.</p>
            <h3 class="title is-4">ADaPT dynamically accomodates task complexity</h3>
            <img src="./website/images/task_complexity.svg" alt="task complexity">
            <br>
            <p>Lastly, ADaPT can accomodate to task complexity in WebShop as we increase the number of displayed products on the search page. On TextCraft dataset, we observe that the decomposition depth employed by ADaPT aligns with the inherent recipe depth (or complexity) of the underlying task.</p>
            <!-- <p>
            In CLIN, a <strong>controller</strong> takes the current task, retrievals from <strong>memory</strong>, and the trial so far, to generate the next goal to achieve. The <strong>executor</strong> then converts this to a valid action to perform towards that goal. The simulator then performs the action and returns an observation of that action's effect. Memory is updated at the end of each trial by the <strong>memory generator</strong>.
            </p>

            <h3 class="title is-4">Memory</h3>
            <p>
              CLIN memory uses two relations: "necessary" and "does not contribute" to semantically abstract past actions. It also uses the linguistic uncertainty measures: "may" and "should" to assert degree of confidence on abstracted learning.
            </p>
            <img src="./static/images/clin_memory.png" display="block" style="max-width: 50%; align-items: center; margin: auto;">

            <h3 class="title is-4">CLIN shows rapid adaptation</h3>
            <p>
              Rapid and Efficient: (a) CLIN readily adapts on both short and long tasks. CLIN becomes more efficient in later trials by solving the tasks with a lower number of (average) steps. (b) CLIN outperforms state-of-the-art Reflexion by 23 absolute points. 
            </p>
            <img src="./static/images/clin_adaptation.png" display="block" style="max-width: 80%; align-items: center; margin: auto;">

            <h3 class="title is-4">CLIN shows efficient generalization</h3>
            <img src="./static/images/clin-table.png" display="block" style="max-width: 80%; align-items: center; margin: auto;">
            <br>
            <br>
            <p>
              Positive Transfer: CLIN beats previous Reinforcement Learning agents and Language agents with positive transfer learning. With both generalization followed by adaptation, CLIN become state-of-the-art without using any gold trajectories as demonstration. Both in generalization over unseen environments (a) and tasks (b), CLIN takes fewer steps compared to no-generalization setup and achieves better performance.
            </p>
            <img src="./static/images/clin_generalization.png" display="block" style="max-width: 70%; align-items: center; margin: auto;">

            <h3 class="title is-4">Related Readings</h3>
            <p>
              Concurrent work (<a href="https://voyager.minedojo.org/">Voyager</a>, <a href="https://arxiv.org/pdf/2308.10144.pdf">ExpeL</a>) supports the idea of non-parametric continual learning for language agents. Our work builds on team's previous work <a href="https://blog.allenai.org/towards-teachable-reasoning-systems-dd16659fd9f8">interactive teaching system with continual feedback</a> and <a href="https://selfrefine.info/">self-refining</a> abilities of large language models. Follow the <a href="https://sciworld.apps.allenai.org/">ScienceWorld</a> project to know more about the benchmark and baseline models.
            </p> -->
          </div>
        </div>
      </div>
</section>



<section class="section" id="BibTeX">
  <div class="container is-max-desktop content">
    <h2 class="title">BibTeX</h2>
    <pre><code>@article{prasad2023adapt,
      author    = "Prasad, Archiki and Koller, Alexander and Hartmann, Mareike and Clark, Peter and Sabharwal, Ashish and Bansal, Mohit and Khot, Tushar",
      title     = "ADaPT: As-Needed Decomposition and Planning with Language Models",
      journal   = "arXiv",
      year      = "2023",}</code></pre>
  </div>
</section>


<footer class="footer">
  <div class="container">
    <div class="columns is-centered">
      <div class="publication-links">
        <span class="link-block">
          <img src="./website/images/ai2-logo-header.png" display="block" style="max-width: 20%; align-items: center; margin: auto;">
        </span>
        <br>
        <span class="link-block">
          <img src="./website/images/aristo-logo-header.png" display="block" style="max-width: 15%; align-items: center; margin: auto;">
        </span>
      </div>
    </div>
    <br>
    <p><center><a href="https://allenai.org/">Allen Institute for AI</a> - all rights reserved.<br>
      The website template is borrowed from <a href="https://nerfies.github.io/">here</a>.</center></p>
  </div>
</div>
</footer>

</body>
</html>
